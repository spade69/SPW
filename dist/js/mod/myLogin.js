define("useful",[],function(){String.prototype.glen=function(){for(var e=0,n=0;n<this.length;n++)this.charCodeAt(n)>127||94==this.charCodeAt(n)?e+=2:e++;return e},addEvent=function(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t},autoCenter=function(e){var n=document.body.clientWidth,t=document.body.clientHeight,r=e.offsetWidth,o=e.offsetHeight;e.style.left=(n-r)/2+"px",e.style.top=(t-o)/2+"px"},fillToBody=function(e){e.style.width=document.body.clientWidth+"px",e.style.height=document.body.clientHeight+"px"}}),define("verify",["useful"],function(e){var n=function(e,n){this.btn=e,this.check=new Array(!1,!1,!1,!1,!1),this.items=n};return n.prototype={constructor:n,flag:0,vName:function(e,n){function t(n){var t=r.value.trim(),o=t.glen();n[0]=!1,o<1||""==t?(r.style.borderColor="red",e.innerHTML="<span style='color:red'>输入不能为空</span>"):o<4||o>16?(r.style.borderColor="red",e.innerHTML="<span style='color:red'>请检查名称的</span>"):(n[0]=!0,r.style.borderColor="green",e.innerHTML="<span style='color:green'>名称格式正确</span>")}var r=n,o=this.check;addEvent(r,"blur",function(){t(o)}),addEvent(r,"focus",function(){e.innerHTML="<span style='color:gray'>必填，长度为4~16字符</span>"})},vPasswd:function(e,n){function t(t){var r=n.value.trim();t[1]=!1,r.length<1||""===r?(n.style.borderColor="red",e.innerHTML="<span style='color:red'>输入不能为空</span>"):r.match(/^[a-zA-Z0-9]{6,16}$/)?(t[1]=!0,n.style.borderColor="green",e.innerHTML="<span style='color:green'>密码格式正确</span>",flag=1):(n.style.borderColor="red",e.innerHTML="<span style='color:red'>请输入6-16位字符且只能为数字和字母</span>")}var r=this.check;addEvent(n,"blur",function(){t(r)}),addEvent(n,"focus",function(){e.innerHTML="<span style='color:gray'>6~16位数字和字母</span>"})},vPassx:function(e,n,t){function r(r){var o=t.value.trim(),s=n.value.trim();r[2]=!1,o.length<1||""===o?(t.style.borderColor="red",e.innerHTML="<span style='color:red'>输入不能为空</span>"):o===s&&1===flag?(r[2]=!0,t.style.borderColor="green",e.innerHTML="<span style='color:green'>密码正确</span>"):(t.style.borderColor="red",e.innerHTML="<span style='color:red'>两次输入的密码要相同</span>")}var o=this.check;addEvent(t,"blur",function(){r(o)}),addEvent(t,"focus",function(){e.innerHTML="<span style='color:gray'>重复输入密码</span>"})},vmail:function(e,n){function t(t){var r=n.value.trim(),o=new RegExp("^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$","i");t[3]=!1,r.length<1||""===r?(n.style.borderColor="red",e.innerHTML="<span style='color:red'>输入不能为空</span>"):r.match(o)?(t[3]=!0,n.style.borderColor="green",e.innerHTML="<span style='color:green'>邮箱格式正确</span>"):(n.style.borderColor="red",e.innerHTML="<span style='color:red'>邮箱格式错误</span>")}var r=this.check;addEvent(n,"blur",function(){t(r)}),addEvent(n,"focus",function(){e.innerHTML="<span style='color:gray'>exampleh@hah.com</span>"})},vphone:function(e,n){function t(t){var r=n.value.trim();t[4]=!1,r.length<1||""===r?(n.style.borderColor="red",e.innerHTML="<span style='color:red'>输入不能为空</span>"):r.match(/0?(13|14|15|18)[0-9]{9}/)?(t[4]=!0,n.style.borderColor="green",e.innerHTML="<span style='color:green'>电话格式正确</span>"):(n.style.borderColor="red",e.innerHTML="<span style='color:red'>电话格式错误</span>")}var r=this.check;addEvent(n,"blur",function(){t(r)}),addEvent(n,"focus",function(){e.innerHTML="<span style='color:gray'>请输入11位手机号码</span>"})},vbtn:function(e){function n(n,t){for(var r=1,o=0;o<t;o++)if(n[o]===!1){r=0;break}r?e.disabled=!1:e.disabled=!0}var t=this.check,r=this.items;setInterval(function(){n(t,r)},1e3)}},{vform:n}}),define("myLogin",["verify","jquery"],function(e,n){var t=function(e,n,t,r,o){this.btn=document.getElementById(e),this.name=document.getElementById(n),this.passwd=document.getElementById(t),this.info=document.getElementById(r),this.icode=document.getElementById(o),this.btn.disabled=!0};return t.prototype={myVerify:function(){var n=new e.vform(this.btn,2);n.vName(this.info,this.name),n.vPasswd(this.icode,this.passwd),n.vbtn(this.btn)},myPost:function(e,n){var t="http://spw.linzhida.cc/user/login";this.name.setAttribute("name","username"),this.passwd.setAttribute("name","password");var r=$("."+e).find("input[name='validateCode']").val();console.log(r),$(this.btn).on("click",function(){$("."+e).on("submit",function(n){n.preventDefault();var r=$.post(t,$("."+e).serialize());r.done(function(e){switch(e.result){case 0:window.location.href="Main.html";break;case 1:alert("Failed,problem with username or password");break;case 2:alert("Failed of validateCode")}})})})},myValidateFresh:function(){var e="http://spw.linzhida.cc/getValidateCode";$("#validateImg").on("click",function(){this.setAttribute("src",e)})}},{createLogin:t}});